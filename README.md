# School Management System

### A Django + Next.js powered School Managament Web Application System equipped with various features!

<br>

> Status: **Currently in Development**

<br>
<hr>


## Table of Contents

- [Features](#features)
- [Requirements](#requirements)
- [Setup Guide](#setup-guide)
- [How to Setup Credentials](#how-to-setup-credentials)

<br>
<hr>


## Features

- Secure
- REST API based
- JWT Authentication System with Refresh Tokens
- Light + Dark Mode
- Student, Teacher, Management and Admin Dashboard
- Create Users, Classes, Subjects, Assignments
- ... and a lot more!

<br>
<hr>

## Requirements

- Python 3.9 or above
- Node.js 16 or above
- PostgreSQL 13 or above
- Redis 3.0 or above

<br>
<hr>

## Setup Guide

- Install and setup [Redis](https://redis.io/) and [PostgreSQL](https://www.postgresql.org/).

- Git clone the repository and switch the current directory to the project directory
    ```bat
    git clone https://github.com/AkshuAgarwal/SchoolManagementSystem
    cd SchoolManagementSystem
    ```

- Install the required Packages:
    - Python:
        ```bat
        poetry install
        ```

        > **[Windows]**: In case the ValueError occurs while installing the packages, you can try deleting the `AppData\Local\pypoetry\Cache\artifacts` directory and retry installation. More Info <sup>[Github Issue](https://github.com/python-poetry/poetry/issues/4479) / [StackOverflow Answer](https://stackoverflow.com/a/69425375)</sup>

    - Node.js:
        ```bat
        npm install
        ```

- Setup Credentials and Variables:
    - Rename [`.env.example`](./.env.example) to `.env`.

    - Rename [`constants.json.example`](./constants.json.example) to `constants.json`.

    - Fill all the credentials and values accordingly. (Refer to [How to setup Credentials](#how-to-setup-credentials) for detailed guide).

- Setup Database
    - Run the given commands to migrate the database to automatically create required tables:
        ```py
        poetry run python manage.py makemigrations
        ```
        ```py
        poetry run python manage.py migrate
        ```

- Start the project:
    - Start Redis Server on the given url listed in `.env`.

    - Make sure the PostgreSQL server is running on the same credentials mentioned in `.env`.

    - Open a terminal and start the Django server:
        ```bat
        poetry run python manage.py runserver
        ```

    - Open another terminal and start Next App:
        ```bat
        npm run dev
        ```

        To run the server on custom port, add the port number with argument `-p`, like:
        ```py
        npm run dev -p 8080
        ```

        The default port is `3000`.

> You don't need to take care of creating .venv and required directories! Poetry automatically creates a venv in your project directory and Django automatically checks (and creates if missing) for the directories.

<br>
<hr>

## How to Setup Credentials

- ### .env
    - **PRODUCTION** - Whether to run the server in Production (`true`) or in Development (`false`)

    - **DJANGO_SECRET_KEY** - A Secret key used by Django.
        
        The key is generated by Django's `startproject` command. To generate one yourself, run
        ```py
        poetry run python generate_secret_key.py
        ```
        and copy-paste the key. You can also create a strong secret key yourself!

    - **DJANGO_PROTOCOL** - Protocol to run the Django Server on (`http`/`https`)

    - **DJANGO_HOSTNAME** - Host Name to run the Django Server on

    - **DJANGO_PORT** - Port to run the Django Server on

    - **[ALLOWED_HOSTS](https://docs.djangoproject.com/en/4.0/ref/settings/#allowed-hosts)** - Django's ALLOWED_HOSTS Setting. For setting multiple values, separate every item by a comma. Example: `".localhost,127.0.0.1,[::1]"`

    - **[CORS_ALLOWED_ORIGINS](https://github.com/adamchainz/django-cors-headers#cors_allowed_origins-sequencestr)** - Django Cors Headers CORS_ALLOWED_ORIGINS setting. For setting multiple values, separate every item by a comma. Example: `"http://127.0.0.1:3000,http://localhost:3000"`

    - **[CSRF_TRUSTED_ORIGINS](https://docs.djangoproject.com/en/4.0/ref/settings/#csrf-trusted-origins)** - Django's CSRF_TRUSTED_ORIGINS setting. For setting multiple values, separate every item by a comma. Example: `"http://127.0.0.1:3000,http://localhost:3000"`

    - **ANALYZE** - **[Development Only]** Enables the `@next/bundle-analyzer` to analyze bundle size. (`true`/`false`)

    - **SITE_URL** - URL of the frontend site

    - **DB_HOST** - Database Host Name

    - **DB_PORT** - Database Port

    - **DB_USER** - Database User

    - **DB_PASS** - Database Password

    - **DB_NAME** - Database Name

    - **REDIS_URL** - URL on which the redis server is running

    - **EMAIL_CONNECTION** - Connection to use when talking to SMTP server. (`tls`/`ssl`). More Info <sup>[tls](https://docs.djangoproject.com/en/4.0/ref/settings/#email-use-tls) / [ssl](https://docs.djangoproject.com/en/4.0/ref/settings/#email-use-ssl)</sup>

    - **[FROM_EMAIL](https://docs.djangoproject.com/en/4.0/ref/settings/#default-from-email)** - Default email address to use for various automated correspondence from the site manager(s).

    - **[EMAIL_HOST](https://docs.djangoproject.com/en/4.0/ref/settings/#email-host)** - Host to use for sending the email

    - **[EMAIL_PORT](https://docs.djangoproject.com/en/4.0/ref/settings/#email-port)** - Port the use for the SMTP server

    - **[EMAIL_HOST_USER](https://docs.djangoproject.com/en/4.0/ref/settings/#email-host-user)** - Username to use for the SMTP server

    - **[EMAIL_HOST_PASSWORD](https://docs.djangoproject.com/en/4.0/ref/settings/#email-host-password)** - Password to use for the SMTP server

    - **[EMAIL_SUBJECT_PREFIX](https://docs.djangoproject.com/en/4.0/ref/settings/#email-subject-prefix)** - Subject-line prefix for email messages sent with `django.core.mail.mail_admins` or `django.core.mail.mail_managers`. Youâ€™ll probably want to include the trailing space

- ### constants.json
    - **SCHOOL_NAME** - Name of the School (will be displayed in Frontend)

    - **[TIME_ZONE](https://docs.djangoproject.com/en/4.0/ref/settings/#time-zone)** - Time Zone for Django

    - **[PASSWORD_RESET_TIMEOUT](https://docs.djangoproject.com/en/4.0/ref/settings/#password-reset-timeout)** - No. of seconds the Password Reset Link will be valid for

    - **FOOTER_TEXT** - Text to be displayed in Footer (in frontend)
